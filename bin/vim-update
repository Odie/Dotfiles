#! env ruby

require("colorize")

janusDir = File.join(Dir.home, ".vim")
pluginDir = File.join(Dir.home, ".janus")

puts("Updating Janus...".green)
Dir.chdir(janusDir)
`rake`

puts("Updating user plugins...".green)
Dir.foreach(pluginDir) {|filename|
	# Ignore . and ..
	if filename == "." or filename == ".."
		next
	end

	# Ignore all non-directory files
	fullPath = File.join(pluginDir, filename)
	if not File.directory?(fullPath)
		next
	end

	# If we reached this point, the item is a directory.
	# Try a git pull in the diretory
	Dir.chdir(fullPath)
	`git pull origin master`
}

puts("Done! Happy Vimming!".green)
